const getStartedBtn=document.getElementById("get-started");getStartedBtn&&getStartedBtn.addEventListener("click",()=>{const e=document.getElementById("services")||document.getElementById("contact");e&&e.scrollIntoView({behavior:"smooth"})});const requestQuoteBtn=document.getElementById("request-quote");requestQuoteBtn&&requestQuoteBtn.addEventListener("click",()=>{const e=document.getElementById("quote");e&&e.scrollIntoView({behavior:"smooth"})});const navToggle=document.getElementById("nav-toggle");function toggleNav(){const e=document.getElementById("nav-links"),t="true"===navToggle.getAttribute("aria-expanded");navToggle.setAttribute("aria-expanded",String(!t)),e&&e.classList.toggle("open")}navToggle&&navToggle.addEventListener("click",toggleNav);const navItems=document.querySelectorAll(".nav-links a");navItems.length&&navItems.forEach(e=>e.addEventListener("click",()=>{const t=document.getElementById("nav-links");t&&t.classList.remove("open"),navToggle&&navToggle.setAttribute("aria-expanded","false"),navItems.forEach(e=>e.classList.remove("active")),e.classList.add("active")})),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("section[id]");if(e.length&&navItems.length){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&navItems.forEach(t=>{t.classList.toggle("active",t.getAttribute("href")===`#${e.target.id}`)})})},{threshold:.6});e.forEach(e=>t.observe(e))}const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("fade-in"),t.unobserve(e.target))})},{threshold:.1});document.querySelectorAll("section").forEach(e=>t.observe(e)),fetch("data/company.json").then(e=>e.json()).then(e=>{const t=document.getElementById("services");t&&Array.isArray(e.services)&&e.services.forEach(e=>{const n=document.createElement("article");n.className="card";let o="";e.icon&&(o+=`<div class="icon">${e.icon}</div>`),o+=`<h3>${e.title}</h3><p>${e.description}</p>`,n.innerHTML=o,t.appendChild(n)});const n=document.getElementById("company-address");n&&e.address&&(n.textContent=e.address);const o=document.getElementById("company-phones");o&&Array.isArray(e.phones)&&(o.innerHTML=e.phones.map(e=>`<a href="tel:${e}">${e}</a>`).join(", "))}).catch(e=>console.error("Failed to load company data",e));const n=[{img:"https://images.unsplash.com/photo-1516979187457-637abb4f9353?auto=format&fit=crop&w=600&q=80",title:"Restored Antique Book",description:"Full restoration of a 19th-century volume."},{img:"https://images.unsplash.com/photo-1528209390973-5a63a78f9368?auto=format&fit=crop&w=600&q=80",title:"Custom Leather Journal",description:"Hand-stitched leather-bound journal."},{img:"https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&w=600&q=80",title:"Limited Edition Binding",description:"Small-batch artisan book covers."}],o=document.querySelector(".portfolio-grid");o&&n.forEach(e=>{const t=document.createElement("article");t.className="card",t.innerHTML=`<img src="${e.img}" alt="${e.title}" loading="lazy"><h3>${e.title}</h3><p>${e.description}</p>`,o.appendChild(t)});const a=[{img:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=600&q=80",title:"The Art of Book Restoration",description:"A behind-the-scenes look at bringing books back to life."},{img:"https://images.unsplash.com/photo-1509021436665-8f07dbf5bf1d?auto=format&fit=crop&w=600&q=80",title:"Choosing the Right Paper",description:"Tips for selecting paper for your project."},{img:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?auto=format&fit=crop&w=600&q=80",title:"Binding Trends 2025",description:"Whatâ€™s new in the world of bookbinding."}],s=document.querySelector(".blog-grid");s&&a.forEach(e=>{const t=document.createElement("article");t.className="card",t.innerHTML=`<img src="${e.img}" alt="${e.title}" loading="lazy"><h3>${e.title}</h3><p>${e.description}</p>`,s.appendChild(t)});const r=[{question:"What services do you offer?",answer:"We specialize in bookbinding, restoration, and custom finishing."},{question:"How can I request a quote?",answer:"Use the request a quote form above and we will respond promptly."},{question:"Do you handle large orders?",answer:"Yes, our industrial finishing service accommodates high-volume projects."}],i=document.getElementById("faq-list");i&&r.forEach(e=>{const t=document.createElement("article");t.className="faq",t.innerHTML=`<h3>${e.question}</h3><p>${e.answer}</p>`,i.appendChild(t)});const c=document.querySelectorAll("#testimonials .testimonial"),l=document.getElementById("next-testimonial"),d=document.getElementById("prev-testimonial");let m=0;let u;function g(e){c.forEach((t,n)=>{t.classList.toggle("active",n===e)})}function h(){m=(m+1)%c.length,g(m)}function p(){u=setInterval(h,5e3)}function v(){clearInterval(u),p()}l&&l.addEventListener("click",()=>{h(),v()}),d&&d.addEventListener("click",()=>{m=(m-1+c.length)%c.length,g(m),v()}),c.length&&(g(m),p());const y=document.getElementById("contact-form");y&&y.addEventListener("submit",e=>{e.preventDefault();let t=!0;const n=document.getElementById("name"),o=document.getElementById("email"),a=document.getElementById("message"),s=document.getElementById("name-error"),r=document.getElementById("email-error"),i=document.getElementById("message-error");s.textContent="",r.textContent="",i.textContent="",n.value.trim()||(s.textContent="Name is required.",t=!1);o.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.trim())||(r.textContent="Enter a valid email.",t=!1):(r.textContent="Email is required.",t=!1),a.value.trim()||(i.textContent="Message is required.",t=!1),t&&(y.reset(),alert("Thank you for your message!"))});const E=document.getElementById("quote-form");E&&E.addEventListener("submit",e=>{e.preventDefault();let t=!0;const n=document.getElementById("quote-name"),o=document.getElementById("quote-email"),a=document.getElementById("book-type"),s=document.getElementById("quantity"),r=document.getElementById("quote-name-error"),i=document.getElementById("quote-email-error"),c=document.getElementById("book-type-error"),l=document.getElementById("quantity-error"),d=document.getElementById("quote-success");r.textContent="",i.textContent="",c.textContent="",l.textContent="",d&&(d.textContent=""),n.value.trim()||(r.textContent="Name is required.",t=!1);o.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.trim())||(i.textContent="Enter a valid email.",t=!1):(i.textContent="Email is required.",t=!1),a.value.trim()||(c.textContent="Book type is required.",t=!1),(!s.value.trim()||parseInt(s.value,10)<=0)&&(l.textContent="Enter a valid quantity.",t=!1),t&&(E.reset(),d&&(d.textContent="Quote request sent!",setTimeout(()=>{d.textContent=""},5e3)))});const f=document.getElementById("lightbox"),q=f?f.querySelector("img"):null,I=f?f.querySelector(".lightbox-caption"):null,B=f?f.querySelector(".lightbox-close"):null;document.querySelectorAll("#gallery img").forEach(e=>{e.addEventListener("click",()=>{if(f&&q){if(q.src=e.src,q.alt=e.alt,I){const t=e.closest("figure"),n=t?t.querySelector("figcaption"):null;I.textContent=n?n.textContent:""}f.classList.add("open")}})}),B&&B.addEventListener("click",()=>{f.classList.remove("open")}),f&&f.addEventListener("click",e=>{e.target===f&&f.classList.remove("open")})});