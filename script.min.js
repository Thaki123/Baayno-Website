const getStartedBtn=document.getElementById("get-started");getStartedBtn&&getStartedBtn.addEventListener("click",()=>{const e=document.getElementById("services")||document.getElementById("contact");e&&e.scrollIntoView({behavior:"smooth"})});const requestQuoteBtn=document.getElementById("request-quote");requestQuoteBtn&&requestQuoteBtn.addEventListener("click",()=>{const e=document.getElementById("quote");e&&e.scrollIntoView({behavior:"smooth"})});const navToggle=document.getElementById("nav-toggle");function toggleNav(){const e=document.getElementById("nav-links"),t="true"===navToggle.getAttribute("aria-expanded");navToggle.setAttribute("aria-expanded",String(!t)),e&&e.classList.toggle("open")}navToggle&&navToggle.addEventListener("click",toggleNav);const navItems=document.querySelectorAll(".nav-links a");navItems.length&&navItems.forEach(e=>e.addEventListener("click",()=>{const t=document.getElementById("nav-links");t&&t.classList.remove("open"),navToggle&&navToggle.setAttribute("aria-expanded","false"),navItems.forEach(e=>e.classList.remove("active")),e.classList.add("active")})),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("section[id]");if(e.length&&navItems.length){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&navItems.forEach(t=>{t.classList.toggle("active",t.getAttribute("href")===`#${e.target.id}`)})})},{threshold:.6});e.forEach(e=>t.observe(e))}const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("fade-in"),t.unobserve(e.target))})},{threshold:.1});document.querySelectorAll("section").forEach(e=>t.observe(e));const n=[{icon:"ðŸ“š",title:"Hardcover Binding",description:"Durable covers for premium books."},{icon:"ðŸ“˜",title:"Perfect/PUR Binding",description:"Clean, professional softcover books."},{icon:"ðŸ› ï¸",title:"Restoration & Repair",description:"Give cherished books a new life."},{icon:"âœ¨",title:"Foil & Embossing",description:"Custom finishes that stand out."},{icon:"ðŸ§ª",title:"Short-Run Prototyping",description:"Test editions without large commitments."},{icon:"ðŸ­",title:"Industrial Finishing",description:"High-volume finishing for publishers."}],o=document.getElementById("services");o&&n.forEach(e=>{const t=document.createElement("article");t.className="card";let n="";e.icon&&(n+=`<div class="icon">${e.icon}</div>`),n+=`<h3>${e.title}</h3><p>${e.description}</p>`,t.innerHTML=n,o.appendChild(t)});const i=[{img:"https://images.unsplash.com/photo-1516979187457-637abb4f9353?auto=format&fit=crop&w=600&q=80",title:"Restored Antique Book",description:"Full restoration of a 19th-century volume."},{img:"https://images.unsplash.com/photo-1528209390973-5a63a78f9368?auto=format&fit=crop&w=600&q=80",title:"Custom Leather Journal",description:"Hand-stitched leather-bound journal."},{img:"https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&w=600&q=80",title:"Limited Edition Binding",description:"Small-batch artisan book covers."}],r=document.querySelector(".portfolio-grid");r&&i.forEach(e=>{const t=document.createElement("article");t.className="card",t.innerHTML=`<img src="${e.img}" alt="${e.title}" loading="lazy"><h3>${e.title}</h3><p>${e.description}</p>`,r.appendChild(t)});const s=[{img:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=600&q=80",title:"The Art of Book Restoration",description:"A behind-the-scenes look at bringing books back to life."},{img:"https://images.unsplash.com/photo-1509021436665-8f07dbf5bf1d?auto=format&fit=crop&w=600&q=80",title:"Choosing the Right Paper",description:"Tips for selecting paper for your project."},{img:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?auto=format&fit=crop&w=600&q=80",title:"Binding Trends 2025",description:"Whatâ€™s new in the world of bookbinding."}],a=document.querySelector(".blog-grid");a&&s.forEach(e=>{const t=document.createElement("article");t.className="card",t.innerHTML=`<img src="${e.img}" alt="${e.title}" loading="lazy"><h3>${e.title}</h3><p>${e.description}</p>`,a.appendChild(t)});const l=document.querySelectorAll("#testimonials .testimonial"),c=document.getElementById("next-testimonial"),d=document.getElementById("prev-testimonial");let m=0;let u;function g(e){l.forEach((t,n)=>{t.classList.toggle("active",n===e)})}function h(){m=(m+1)%l.length,g(m)}function p(){u=setInterval(h,5e3)}function v(){clearInterval(u),p()}c&&c.addEventListener("click",()=>{h(),v()}),d&&d.addEventListener("click",()=>{m=(m-1+l.length)%l.length,g(m),v()}),l.length&&(g(m),p());const f=document.getElementById("contact-form");f&&f.addEventListener("submit",e=>{e.preventDefault();let t=!0;const n=document.getElementById("name"),o=document.getElementById("email"),i=document.getElementById("message"),r=document.getElementById("name-error"),s=document.getElementById("email-error"),a=document.getElementById("message-error");r.textContent="",s.textContent="",a.textContent="",n.value.trim()||(r.textContent="Name is required.",t=!1);o.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.trim())||(s.textContent="Enter a valid email.",t=!1):(s.textContent="Email is required.",t=!1),i.value.trim()||(a.textContent="Message is required.",t=!1),t&&(f.reset(),alert("Thank you for your message!"))});const E=document.getElementById("quote-form");E&&E.addEventListener("submit",e=>{e.preventDefault();let t=!0;const n=document.getElementById("quote-name"),o=document.getElementById("quote-email"),i=document.getElementById("book-type"),r=document.getElementById("quantity"),s=document.getElementById("quote-name-error"),a=document.getElementById("quote-email-error"),l=document.getElementById("book-type-error"),c=document.getElementById("quantity-error"),d=document.getElementById("quote-success");s.textContent="",a.textContent="",l.textContent="",c.textContent="",d&&(d.textContent=""),n.value.trim()||(s.textContent="Name is required.",t=!1);o.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.trim())||(a.textContent="Enter a valid email.",t=!1):(a.textContent="Email is required.",t=!1),i.value.trim()||(l.textContent="Book type is required.",t=!1),(!r.value.trim()||parseInt(r.value,10)<=0)&&(c.textContent="Enter a valid quantity.",t=!1),t&&(E.reset(),d&&(d.textContent="Quote request sent!",setTimeout(()=>{d.textContent=""},5e3)))});const y=document.getElementById("lightbox"),I=y?y.querySelector("img"):null,B=y?y.querySelector(".lightbox-caption"):null,q=y?y.querySelector(".lightbox-close"):null;document.querySelectorAll("#gallery img").forEach(e=>{e.addEventListener("click",()=>{if(y&&I){if(I.src=e.src,I.alt=e.alt,B){const t=e.closest("figure"),n=t?t.querySelector("figcaption"):null;B.textContent=n?n.textContent:""}y.classList.add("open")}})}),q&&q.addEventListener("click",()=>{y.classList.remove("open")}),y&&y.addEventListener("click",e=>{e.target===y&&y.classList.remove("open")})});