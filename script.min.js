const getStartedBtn=document.getElementById("get-started");getStartedBtn&&getStartedBtn.addEventListener("click",()=>{const e=document.getElementById("services")||document.getElementById("contact");e&&e.scrollIntoView({behavior:"smooth"})});const requestQuoteBtn=document.getElementById("request-quote");requestQuoteBtn&&requestQuoteBtn.addEventListener("click",()=>{const e=document.getElementById("quote");e&&e.scrollIntoView({behavior:"smooth"})});const navToggle=document.getElementById("nav-toggle");function toggleNav(){const e=document.getElementById("nav-links"),t="true"===navToggle.getAttribute("aria-expanded");navToggle.setAttribute("aria-expanded",String(!t)),e&&e.classList.toggle("open")}navToggle&&navToggle.addEventListener("click",toggleNav);const navItems=document.querySelectorAll(".nav-links a");navItems.length&&navItems.forEach(e=>e.addEventListener("click",()=>{const t=document.getElementById("nav-links");t&&t.classList.remove("open"),navToggle&&navToggle.setAttribute("aria-expanded","false"),navItems.forEach(e=>e.classList.remove("active")),e.classList.add("active")})),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("section[id]");if(e.length&&navItems.length){const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&navItems.forEach(t=>{t.classList.toggle("active",t.getAttribute("href")===`#${e.target.id}`)})})},{threshold:.6});e.forEach(e=>t.observe(e))}const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("fade-in"),t.unobserve(e.target))})},{threshold:.1});document.querySelectorAll("section").forEach(e=>t.observe(e)),fetch("data/company.json").then(e=>e.json()).then(e=>{const t=document.getElementById("services");t&&Array.isArray(e.services)&&e.services.forEach(e=>{const n=document.createElement("article");n.className="card";let o="";e.icon&&(o+=`<div class="icon">${e.icon}</div>`),o+=`<h3>${e.title}</h3><p>${e.description}</p>`,n.innerHTML=o,t.appendChild(n)});const n=document.getElementById("company-address");n&&e.address&&(n.textContent=e.address);const o=document.getElementById("company-phones");o&&Array.isArray(e.phones)&&(o.innerHTML=e.phones.map(e=>`<a href="tel:${e}">${e}</a>`).join(", "))}).catch(e=>console.error("Failed to load company data",e));const n=[{img:"https://images.unsplash.com/photo-1516979187457-637abb4f9353?auto=format&fit=crop&w=600&q=80",title:"Restored Antique Book",description:"Full restoration of a 19th-century volume."},{img:"https://images.unsplash.com/photo-1528209390973-5a63a78f9368?auto=format&fit=crop&w=600&q=80",title:"Custom Leather Journal",description:"Hand-stitched leather-bound journal."},{img:"https://images.unsplash.com/photo-1532012197267-da84d127e765?auto=format&fit=crop&w=600&q=80",title:"Limited Edition Binding",description:"Small-batch artisan book covers."}],o=document.querySelector(".portfolio-grid");o&&n.forEach(e=>{const t=document.createElement("article");t.className="card",t.innerHTML=`<img src="${e.img}" alt="${e.title}" loading="lazy"><h3>${e.title}</h3><p>${e.description}</p>`,o.appendChild(t)});const a=[{img:"https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=600&q=80",title:"The Art of Book Restoration",description:"A behind-the-scenes look at bringing books back to life."},{img:"https://images.unsplash.com/photo-1509021436665-8f07dbf5bf1d?auto=format&fit=crop&w=600&q=80",title:"Choosing the Right Paper",description:"Tips for selecting paper for your project."},{img:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?auto=format&fit=crop&w=600&q=80",title:"Binding Trends 2025",description:"Whatâ€™s new in the world of bookbinding."}],r=document.querySelector(".blog-grid");r&&a.forEach(e=>{const t=document.createElement("article");t.className="card",t.innerHTML=`<img src="${e.img}" alt="${e.title}" loading="lazy"><h3>${e.title}</h3><p>${e.description}</p>`,r.appendChild(t)});const s=document.querySelectorAll("#testimonials .testimonial"),i=document.getElementById("next-testimonial"),c=document.getElementById("prev-testimonial");let l=0;let d;function m(e){s.forEach((t,n)=>{t.classList.toggle("active",n===e)})}function u(){l=(l+1)%s.length,m(l)}function g(){d=setInterval(u,5e3)}function h(){clearInterval(d),g()}i&&i.addEventListener("click",()=>{u(),h()}),c&&c.addEventListener("click",()=>{l=(l-1+s.length)%s.length,m(l),h()}),s.length&&(m(l),g());const p=document.getElementById("contact-form");p&&p.addEventListener("submit",e=>{e.preventDefault();let t=!0;const n=document.getElementById("name"),o=document.getElementById("email"),a=document.getElementById("message"),r=document.getElementById("name-error"),s=document.getElementById("email-error"),i=document.getElementById("message-error");r.textContent="",s.textContent="",i.textContent="",n.value.trim()||(r.textContent="Name is required.",t=!1);o.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.trim())||(s.textContent="Enter a valid email.",t=!1):(s.textContent="Email is required.",t=!1),a.value.trim()||(i.textContent="Message is required.",t=!1),t&&(p.reset(),alert("Thank you for your message!"))});const v=document.getElementById("quote-form");v&&v.addEventListener("submit",e=>{e.preventDefault();let t=!0;const n=document.getElementById("quote-name"),o=document.getElementById("quote-email"),a=document.getElementById("book-type"),r=document.getElementById("quantity"),s=document.getElementById("quote-name-error"),i=document.getElementById("quote-email-error"),c=document.getElementById("book-type-error"),l=document.getElementById("quantity-error"),d=document.getElementById("quote-success");s.textContent="",i.textContent="",c.textContent="",l.textContent="",d&&(d.textContent=""),n.value.trim()||(s.textContent="Name is required.",t=!1);o.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.trim())||(i.textContent="Enter a valid email.",t=!1):(i.textContent="Email is required.",t=!1),a.value.trim()||(c.textContent="Book type is required.",t=!1),(!r.value.trim()||parseInt(r.value,10)<=0)&&(l.textContent="Enter a valid quantity.",t=!1),t&&(v.reset(),d&&(d.textContent="Quote request sent!",setTimeout(()=>{d.textContent=""},5e3)))});const E=document.getElementById("lightbox"),y=E?E.querySelector("img"):null,f=E?E.querySelector(".lightbox-caption"):null,I=E?E.querySelector(".lightbox-close"):null;document.querySelectorAll("#gallery img").forEach(e=>{e.addEventListener("click",()=>{if(E&&y){if(y.src=e.src,y.alt=e.alt,f){const t=e.closest("figure"),n=t?t.querySelector("figcaption"):null;f.textContent=n?n.textContent:""}E.classList.add("open")}})}),I&&I.addEventListener("click",()=>{E.classList.remove("open")}),E&&E.addEventListener("click",e=>{e.target===E&&E.classList.remove("open")})});